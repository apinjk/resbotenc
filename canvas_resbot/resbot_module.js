const _0x5378e3=_0x22a2;(function(_0x21c41c,_0x4f8091){const _0x19a472=_0x22a2,_0xc247b8=_0x21c41c();while(!![]){try{const _0x2019c6=-parseInt(_0x19a472(0xa1))/0x1+-parseInt(_0x19a472(0xca))/0x2+-parseInt(_0x19a472(0xba))/0x3*(parseInt(_0x19a472(0xb6))/0x4)+-parseInt(_0x19a472(0xce))/0x5+parseInt(_0x19a472(0xbf))/0x6*(parseInt(_0x19a472(0xc6))/0x7)+parseInt(_0x19a472(0xb5))/0x8+parseInt(_0x19a472(0xc3))/0x9*(parseInt(_0x19a472(0xa9))/0xa);if(_0x2019c6===_0x4f8091)break;else _0xc247b8['push'](_0xc247b8['shift']());}catch(_0x46017){_0xc247b8['push'](_0xc247b8['shift']());}}}(_0x1e9e,0x2855d));const {createCanvas,registerFont,loadImage}=require('canvas'),path=require(_0x5378e3(0xa5)),fs2=require('fs'),fs=require('fs')[_0x5378e3(0xae)],axios=require(_0x5378e3(0xcc)),moment=require(_0x5378e3(0x9f)),zonaWaktuIndonesia=_0x5378e3(0xab),waktuSekarangIndonesia=moment()['tz'](zonaWaktuIndonesia);waktuSekarangIndonesia[_0x5378e3(0xad)]('id');const formatTanggal=waktuSekarangIndonesia[_0x5378e3(0xa3)](_0x5378e3(0xb9));async function getImageAndSaveToTempFile(_0x207a4b){const _0x470899=_0x5378e3;try{const _0x5349c1=await getImageBufferFromURL(_0x207a4b),_0x410d53=await saveBufferToTempFile(_0x5349c1);return _0x410d53;}catch(_0x20694b){console['error'](_0x470899(0xcd),_0x20694b);throw _0x20694b;}}function _0x22a2(_0x3a7cb2,_0x969291){const _0x1e9ec7=_0x1e9e();return _0x22a2=function(_0x22a23a,_0x222e37){_0x22a23a=_0x22a23a-0x9f;let _0x427b74=_0x1e9ec7[_0x22a23a];return _0x427b74;},_0x22a2(_0x3a7cb2,_0x969291);}async function getImageBufferFromURL(_0x4b6747){const _0x178c96=_0x5378e3;try{const _0x4cf8a4=await axios[_0x178c96(0xc0)](_0x4b6747,{'responseType':'arraybuffer'}),_0x5831e5=Buffer[_0x178c96(0xc1)](_0x4cf8a4['data'],_0x178c96(0xac));return _0x5831e5;}catch(_0x388e0b){console[_0x178c96(0xc4)](_0x178c96(0xa2),_0x388e0b);throw _0x388e0b;}}async function saveBufferToTempFile(_0x5b7aca){const _0x157c38=_0x5378e3;try{const _0x54a2f4=_0x157c38(0xb3),_0x3fbcbc=path[_0x157c38(0xcb)](__dirname,_0x54a2f4);await fs[_0x157c38(0xb7)](_0x3fbcbc,{'recursive':!![]});const _0x26e658=path[_0x157c38(0xcb)](_0x3fbcbc,'tempfile_'+Date[_0x157c38(0xaf)]()+_0x157c38(0xb0));return await fs[_0x157c38(0xa6)](_0x26e658,_0x5b7aca),_0x26e658;}catch(_0x417263){console[_0x157c38(0xc4)](_0x157c38(0xb4),_0x417263);throw _0x417263;}}async function generateImage(_0x5ab5c5,_0x1c1274,_0x774737){const _0x45417b=_0x5378e3;try{if(!_0x5ab5c5||!_0x1c1274)return console['log'](_0x45417b(0xc9));_0x5ab5c5[_0x45417b(0xb2)]>0x12&&(_0x5ab5c5=_0x5ab5c5[_0x45417b(0xbd)](0x0,0x12));const _0x31071d=await getImageAndSaveToTempFile(_0x1c1274),_0x342e60=formatTanggal;registerFont(path[_0x45417b(0xa0)](__dirname,_0x45417b(0xb8)),{'family':_0x45417b(0xbe)});const _0x3adc96=0x500,_0x3f537=0x2d0,_0x514ab0=createCanvas(_0x3adc96,_0x3f537),_0x27d155=_0x514ab0['getContext']('2d'),_0x2c2035=await loadImage(path[_0x45417b(0xa0)](__dirname,'./'+_0x774737));_0x27d155['drawImage'](_0x2c2035,0x0,0x0,_0x3adc96,_0x3f537);const _0x8200cc=0x0,_0x4da7da=-0x47,_0x128c1b=0xdc,_0x366a69=(_0x3adc96-_0x128c1b*0x2)/0x2+_0x8200cc,_0x5debfe=(_0x3f537-_0x128c1b*0x2)/0x2+_0x4da7da;_0x27d155[_0x45417b(0xc8)](),_0x27d155[_0x45417b(0xd3)](),_0x27d155[_0x45417b(0xc5)](_0x366a69+_0x128c1b,_0x5debfe+_0x128c1b,_0x128c1b,0x0,Math['PI']*0x2,!![]),_0x27d155[_0x45417b(0xa7)](),_0x27d155[_0x45417b(0xa8)]();const _0xc6ef19=await loadImage(path[_0x45417b(0xa0)](__dirname,_0x31071d));_0x27d155[_0x45417b(0xd1)](_0xc6ef19,_0x366a69,_0x5debfe,_0x128c1b*0x2,_0x128c1b*0x2),_0x27d155[_0x45417b(0xc7)](),_0x27d155[_0x45417b(0xd2)]=_0x45417b(0xbb),_0x27d155[_0x45417b(0xb1)]='#ffffff',_0x27d155[_0x45417b(0xa4)]=_0x45417b(0xd0),_0x27d155[_0x45417b(0xcf)]=0x2,_0x27d155['textAlign']=_0x45417b(0xc2),_0x27d155['strokeText'](''+_0x5ab5c5,0x280,0x278),_0x27d155['fillText'](''+_0x5ab5c5,0x280,0x278),await fs[_0x45417b(0xbc)](_0x31071d);const _0x2fa27a=_0x514ab0[_0x45417b(0xaa)]('image/png');return _0x2fa27a;}catch(_0x2b0a85){return console[_0x45417b(0xc4)](_0x2b0a85);}}function _0x1e9e(){const _0x2f3656=['467726muOjiY','join','axios','Error\x20getting\x20image\x20and\x20saving\x20to\x20temp\x20file:','1532705iNdFOF','lineWidth','#000000','drawImage','font','beginPath','moment-timezone','resolve','138505EvSBey','Error\x20fetching\x20image:','format','strokeStyle','path','writeFile','closePath','clip','10BzWmkQ','toBuffer','Asia/Jakarta','binary','locale','promises','now','.jpg','fillStyle','length','/tmp','Error\x20saving\x20buffer\x20to\x20temp\x20file:','1031480RdDuvk','60veyBRh','mkdir','LEMONMILK-Bold.otf','D\x20MMMM\x20YYYY','9279sasswe','55px\x20\x22LEMONMILK\x22','unlink','substring','LEMONMILK','192HUaCne','get','from','center','6567102ejGyMV','error','arc','6979DJyOHs','restore','save','Enter\x20valid\x20parameters\x20(name,\x20pp)'];_0x1e9e=function(){return _0x2f3656;};return _0x1e9e();}module['exports']={'generateImage':generateImage};